import { describe, expect, it } from 'vitest'
import { encodeSetText, type EncodeSetTextParameters } from './encodeSetText.js'

describe('encodeSetText', () => {
  const namehash =
    '0x1234567890123456789012345678901234567890123456789012345678901234'
  const key = 'email'
  const value = 'test@example.com'

  const parameters: EncodeSetTextParameters = {
    namehash,
    key,
    value,
  }

  it('encodes the function data correctly', () => {
    const expected =
      '0x10f13a8c1234567890123456789012345678901234567890123456789012345678901234000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000005656d61696c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001074657374406578616d706c652e636f6d00000000000000000000000000000000'
    const result = encodeSetText(parameters)
    expect(result).toEqual(expected)
  })
})
